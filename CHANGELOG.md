# История изменений (Changelog)

Все значимые изменения в проекте QB (SQL Query Builder) описываются в этом файле. Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.1.0/).

---

## [Unreleased]

_Изменения, ещё не вошедшие в релиз._

---

## [0.5.0] — 2026-02-22

### Добавлено

- Локализация (en/ru): переключатель в TopNav, переводы в BuilderCanvas, сообщения валидации, fallback `generateId()` для UUID.
- Локаль Braille и перенос текста в empty-state.
- Favicon и локализованные плейсхолдеры.
- Правила для Cursor-агентов (Product Owner, Backend, Frontend) и файл [AGENTS.md](AGENTS.md).

### Изменено

- UI: единый вид разделителей, адаптивная шапка Query Builder, выравнивание шапок панелей, высота Output как у Components.

---

## [0.4.0] — 2026-02-21

### Добавлено

- [Makefile](Makefile): цели `frontend`, `backend`, `run`, `setup`, `setup-frontend`, `setup-backend`, `help`; автоматическая установка зависимостей бекенда при первом запуске.
- Шаблоны запросов и история на канвасе, логика истории (сохранение/загрузка из истории).

### Изменено

- Убраны тултипы (по решению).

---

## [0.3.0] — 2026-02-20

### Добавлено

- Шаблоны запросов (Simple / Medium / Complex), строки по группам на канвасе, генерация SQL с подзапросами.
- Форматирование подзапросов в SQL (вариант 1) и правки описаний шаблонов.
- Sidebar: при поиске компонентов категории показываются развёрнутыми; по умолчанию свернуты только Filters, Logical, Aggregations, Grouping, Subquery.
- Builder-canvas: блоки в flex-wrap для переноса на новую строку.
- Block-card: иконки по имени как в библиотеке, компактный COLUMN, `w-full` для source.
- Поле `icon` у блока и передача при добавлении из библиотеки.
- UX панели Query Builder и библиотеки компонентов.
- Limit по умолчанию 10.

### Исправлено

- DnD: точность зон сброса, поведение панелей при перетаскивании, скрытие дубля.
- UI: тултипы поверх всего (Portal и z-index).
- Sidebar: блок не добавляется трижды при двойном клике по стрелке.
- Frontend: импорт Toaster и валидация обязательных полей с маркером только для пустых.

### Удалено / Сделано

- Следы v0.dev убраны, пакет переименован, удалён дубликат use-toast.

---

## [0.2.0] — 2026-02-19 — 2026-02-20

### Добавлено

- Рефакторинг: каталог блоков вынесен в `components-catalog`.
- Бекенд: echo query API через сервис и репозиторий (`POST /api/v1/query/compile`, эхо payload).

---

## [0.1.0] — 2026-02-09 — 2026-02-15

### Добавлено

- Инициализация проекта (init commit).
- Бекенд: структура приложения (service, repository, тесты), FastAPI, маршруты и схемы запросов.
- Фронтенд: drag-and-drop редактор запросов, превью, библиотека компонентов, базовая вёрстка.

---

[Unreleased]: https://github.com/Tolokov/qb/compare/HEAD
[0.5.0]: https://github.com/Tolokov/qb/compare/v0.4.0...v0.5.0
[0.4.0]: https://github.com/Tolokov/qb/compare/v0.3.0...v0.4.0
[0.3.0]: https://github.com/Tolokov/qb/compare/v0.2.0...v0.3.0
[0.2.0]: https://github.com/Tolokov/qb/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/Tolokov/qb/releases/tag/v0.1.0
